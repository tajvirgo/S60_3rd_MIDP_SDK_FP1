<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_06) on Mon May 23 14:44:43 EEST 2005 -->
<TITLE>
CommitControl (JSR-234)
</TITLE>

<META NAME="keywords" CONTENT="javax.microedition.amms.control.audio3d.CommitControl interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="CommitControl (JSR-234)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
1.0: Final Release</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../javax/microedition/amms/control/audio3d/DirectivityControl.html" title="interface in javax.microedition.amms.control.audio3d"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CommitControl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.microedition.amms.control.audio3d</FONT>
<BR>
Interface CommitControl</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD>javax.microedition.media.Control</DD>
</DL>
<HR>
<DL>
<DT>public interface <B>CommitControl</B><DT>extends javax.microedition.media.Control</DL>

<P>
<code>CommitControl</code> provides a mechanism to enable many audio parameters to be updated
 simultaneously. In many ways, it can be considered to be the analog of a 'Draw' or 'Flush' method
 of a graphics system. The commit control, if it is supported,
 can only be obtained from the <A HREF="../../../../../javax/microedition/amms/GlobalManager.html" title="class in javax.microedition.amms"><CODE>GlobalManager</CODE></A>.

 <p>The commit control has two operating modes: <em>immediate mode</em> (the default) and
 <em>deferred mode</em>:

 <p><ul>
 <li>In the <strong>immediate mode</strong>, the <code>CommitControl</code> is effectively disabled,
 so all audio parameters are passed directly to the audio processing system as soon as they are
 set.</li>
 <li>In the <strong>deferred mode</strong>, the <code>CommitControl</code> buffers all the audio
 parameters until the <A HREF="../../../../../javax/microedition/amms/control/audio3d/CommitControl.html#commit()"><CODE>commit</CODE></A> method is called.</li>
 </ul></p>

 <h3>Why do we need commit?</h3>
 <p>Audio processing occurs autonomously in the background under hardware control, so the application
 is not aware that it is happening. Therefore the application is not synchronized to the audio
 processing frame rate, which means the application has no control over when these frames occur.
 The commit control overcomes the classic inter-thread communication problem by ensuring that all
 the parameters for a given state of the application are valid.</p>

 <p>The secondary reason for using a commit control is to improve the performance. If a game with
 6 audio sources and one listener is being updated at 20 frames per second, and at each frame the
 6 sources and the listener are all moving and changing their orientation and velocity, we require:
 </p>

 <p><pre><code>    (6 + 1) * 3 * 20 = 420</code></pre></p>

 <p>API calls each second. In the immediate mode, each of these API calls will require a parameter
 block to be transmitted to the audio processing unit (which is often a separate CPU or DSP). Each
 of these transactions takes a small (but not insignificant) amount of time.</p>

 <p>When the <code>CommitControl</code> is used in the deferred mode, the Java methods buffer the
 parameters (which is simple and fast) until the application calls <code>commit</code>. Now all
 the pending parameters are transmitted in one larger block to the audio processing system. This
 gives the opportunity for a significant improvement in performance.</p>

 <h3>Details</h3>
 <p>The commit control affects the audio parameters for the following controls:</p>

 <p><ul>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/LocationControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>LocationControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/DopplerControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>DopplerControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/OrientationControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>OrientationControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/DirectivityControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>DirectivityControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/DistanceAttenuationControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>DistanceAttenuationControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/MacroscopicControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>MacroscopicControl</CODE></A></li>
 <li><A HREF="../../../../../javax/microedition/amms/control/audio3d/ObstructionControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>ObstructionControl</CODE></A></li>
 </ul></p>

 <p>(The first three controls are the ones that are most likely to be updated rapidly, once per
 frame of an interactive application or game.)</p>

 <p>The <code>CommitControl</code> affects the parameters for these controls on the
 <code>GlobalManager</code> and all the <code>SoundSource3D</code> objects.</p>

 <h3>Example</h3>
 <p>This example illustrates the Java methods involved in using the
 <code>CommitControl</code>. (In reality, a typical game would obviously cache the controls for
 efficiency.)</p>
 <p>In the example, we assume that an array of a fictitious class GameObject, namely gameObjects[],
 contains locations and velocities of some objects in the game and that there exists a method
 updateGame to move all these GameObjects. In the example, we also assume for instance, that the Players that are connected to <code>SoundSource3D</code>s
 have been started and
 that the <code>DopplerControl</code>s have been enabled.</p>
<p>
<pre>
     // Get the CommitControl
     CommitControl commitC = (CommitControl)GlobalManager.getControl("javax.microedition.amms.control.audio3d.CommitControl");

     // Set the 3d audio system to deferred mode
     commitC.setDeferred(true);

     // Get the Spectator and its Controls:
     Spectator spectator = GlobalManager.getSpectator();
     LocationControl locSpec =
         (LocationControl)spectator.getControl("javax.microedition.amms.control.audio3d.LocationControl");
     OrientationControl oriSpec =
         (OrientationControl)spectator.getControl("javax.microedition.amms.control.audio3d.OrientationControl");
     DopplerControl dopSpec =
         (DopplerControl)spectator.getControl("javax.microedition.amms.control.audio3d.DopplerControl");

     // The main game loop
     while(true) {

         // Update positions of game objects
         updateGame();

         // Update the 3d audio system
         for (i = 0; i < gameObjects.length; i++) {

             // Get the ith game object and its SoundSource3D
             GameObject obj = gameObjects[i];
             SoundSource3D ss3d = obj.getSoundSource3D();
             LocationControl lc = (LocationControl)ss3d.getControl("javax.microedition.amms.control.audio3d.LocationControl");
             DopplerControl dc = (DopplerControl)ss3d.getControl("javax.microedition.amms.control.audio3d.DopplerControl");

             // Set the position of the sound source
             lc.setCartesian(obj.x, obj.y, obj.z);

             // Set the velocity of the sound source
             dc.setVelocityCartesian(obj.vx, obj.vy, obj.vz);
         }

         // Set the location, orientation and velocity of the spectator
         locSpec.setCartesian(user.x, user.y, user.z);
         oriSpec.setOrientation(user.heading, user.pitch, user.roll);
         dopSpec.setVelocityCartesian(user.vx, user.vy, user.vz);


         // Commit the changes to the 3d audio system
         commitC.commit();

         // Render graphics
         // .....
     }
</pre></p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../javax/microedition/amms/control/audio3d/LocationControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>LocationControl</CODE></A>, 
<A HREF="../../../../../javax/microedition/amms/control/audio3d/DopplerControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>DopplerControl</CODE></A>, 
<A HREF="../../../../../javax/microedition/amms/control/audio3d/OrientationControl.html" title="interface in javax.microedition.amms.control.audio3d"><CODE>OrientationControl</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../javax/microedition/amms/control/audio3d/CommitControl.html#commit()">commit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transfers all the pending parameters to the audio processing system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../javax/microedition/amms/control/audio3d/CommitControl.html#isDeferred()">isDeferred</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the mode of the <code>CommitControl</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../javax/microedition/amms/control/audio3d/CommitControl.html#setDeferred(boolean)">setDeferred</A></B>(boolean&nbsp;deferred)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the mode of the <code>CommitControl</code>.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="setDeferred(boolean)"><!-- --></A><H3>
setDeferred</H3>
<PRE>
public void <B>setDeferred</B>(boolean&nbsp;deferred)</PRE>
<DL>
<DD>Sets the mode of the <code>CommitControl</code>.

 <p>When switching back from the deferred mode
 to the immediate mode (setDeferred(false)) all the pending parameters
 from the buffer are transmitted to the audio processing
 system automatically.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>deferred</CODE> - a boolean indicating if the property setting should be deferred</DL>
</DD>
</DL>
<HR>

<A NAME="isDeferred()"><!-- --></A><H3>
isDeferred</H3>
<PRE>
public boolean <B>isDeferred</B>()</PRE>
<DL>
<DD>Returns the mode of the <code>CommitControl</code>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD><code>true</code> if setting of properties is deferred</DL>
</DD>
</DL>
<HR>

<A NAME="commit()"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>()</PRE>
<DL>
<DD>Transfers all the pending parameters to the audio processing system.
 <p>
 In the immediate mode, a call to this method is ignored.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
1.0: Final Release</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../javax/microedition/amms/control/audio3d/DirectivityControl.html" title="interface in javax.microedition.amms.control.audio3d"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CommitControl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2004-2005 Nokia Corporation. See the <a href=../../../../../copyright.html>Copyright</a> for details.
</BODY>
</HTML>
