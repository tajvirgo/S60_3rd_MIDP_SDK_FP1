<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN""http://www.w3.org/TR/REC-html40/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Wed Nov 26 13:59:55 EET 2003 -->
<TITLE>
SipClientConnection (JSR180 SIP API for J2ME)
</TITLE>
<META NAME="keywords" CONTENT="javax.microedition.sip.SipClientConnection,SipClientConnection interface">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<SCRIPT>
function asd()
{
parent.document.title="SipClientConnection (JSR180 SIP API for J2ME)";
}
</SCRIPT>
<BODY BGCOLOR="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../javax/microedition/sip/SipClientConnectionListener.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SipClientConnection.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.microedition.sip</FONT>
<BR>
Interface SipClientConnection</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD>javax.microedition.io.Connection, <A HREF="../../../javax/microedition/sip/SipConnection.html">SipConnection</A></DD>
</DL>
<HR>
<DL>
<DT>public interface <B>SipClientConnection</B><DT>extends <A HREF="../../../javax/microedition/sip/SipConnection.html">SipConnection</A></DL>

<P>
<tt>SipClientConnection</tt> represents SIP client transaction.
 application can create a new <tt>SipClientConnection</tt> with <tt>Connector</tt> or 
 <tt>SipDialog</tt> object.<p>
 <A NAME="CLIENT_STATE_CHART">The <tt>SipClientConnection</tt> has following state chart:<br></A>
 <img src="./jsr180-client-state-chart.gif">
 <UL>
 <LI> <em>Created</em>, <tt>SipClientConnection</tt> created from <tt>Connector</tt>
      or <tt>SipDialog</tt>
 <LI> <em>Initialized</em>, request has been initialized with <A HREF="SipClientConnection.html#initRequest(java.lang.String, javax.microedition.sip.SipConnectionNotifier)"><tt>initRequest(...)</tt></A>
      or <tt>initAck()</tt> or <A HREF="SipClientConnection.html#initCancel()"><tt>initCancel()</tt></A>
 <LI> <em>Stream Open</em>, <tt>OutputStream</tt> opened with 
      <A HREF="SipConnection.html#openContentOutputStream()"><tt>openContentOutputStream()</tt></A>. Opening <tt>InputStream</tt> for
      received response does not trigger state transition.
 <LI> <em>Proceeding</em>, request has been sent, waiting for the response, 
      or provisional 1xx response received. <tt>initCancel()</tt> can be 
      called, which will spawn a new <tt>SipClientConnection</tt> 
      which is in <em>Initialized</em> state
 <LI> <em>Completed</em>, transaction completed with final response (2xx, 3xx, 4xx, 5xx, 6xx) in this state the ACK can be initialized. Multiple 200 OK responses can be received. Note different state transition for responses 401 and 407.
 <LI> <em>Unauthorized</em>, transaction completed with response 401 (Unauthorized) or 407 (Proxy Authentication Required). The application can re-originate the request with proper credentials by calling <A HREF="SipClientConnection.html#setCredentials(java.lang.String, java.lang.String, java.lang.String)"><tt>setCredentials()</tt></A> method. After this the <tt>SipClientConnection</tt> is back in <em>Proceeding</em> state.
 <LI> <em>Terminated</em>, the final state, in which the SIP connection has been 
      terminated by error or closed
 </UL>
 <FONT SIZE="2"><b>Note:</b> The state chart of <tt>SipClientConnection</tt> 
 differs from the state chart of SIP client transaction, which can be found in 
 RFC 3261 [1] p.128-133</FONT>
 <br>
 <br>
 Following methods are restricted to a certain state. The table shows the
 list of restricted methods allowed in each state.
 <br><br>
 <UL>
 <LI> <em>Created</em><br><code>
            initRequest<br></code>
 <LI> <em>Initialized</em><br><code>
            addHeader<br>
            setHeader<br>
            removeHeader<br>
            setRequestURI<br>
            openContentOutputStream<br>
            send<br>
            enableRefresh<br>
            setCredentials<br></code>
 <LI> <em>Stream Open</em><br>
            Methods in <code>OutputStream</code> and <code>SipConnection.send</code>
 <LI> <em>Proceeding</em><br><code>
            receive<br>
            openContentInputStream<br>
            initCancel<br></code>
 <LI> <em>Completed</em><br><code>
            openContentInputStream<br>
            initAck<br></code>
 <LI> <em>Unauthorized</em><br><code>
            setCredentials<br></code>
 <LI> <em>Terminated</em><br>
            The transaction and this connection is closed. The I/O methods above will throw IOException
 </tt>
 </UL>
 Following methods can be called in every state. The functionality is defined by the method depending of the information availability.
 <UL>
 <LI> <em>Can be called in every state</em><br><code>
     getHeader<br>
     getHeaders<br>
     getRequestURI<br>
     getMethod<br>
     getStatusCode<br>
     getReasonPhrase<br>
     getDialog<br>
     setListener<br>
     close    </code>    // causes state transition to <em>Terminated</em> state
 </UL>
 <H3>Code examples</H3>
 The example below illustrates the usage of SIP client connection: opening, sending
 one request (MESSAGE) and receiving response:
 <p>
 <pre>
 public void sendTextMessage(String msg) {
    SipClientConnection sc = null;
    try {
       sc = (SipClientConnection) Connector.open("sip:sippy.tester@host.com:5060");
       sc.initRequest("MESSAGE", null);
       sc.setHeader("Subject", "testing...");

       // write message body
       sc.setHeader("Content-Type", "text/plain");
       sc.setHeader("Content-Length", Integer.toString(msg.length()));
       OutputStream os = sc.openContentOutputStream();
       os.write(msg.getBytes());
       os.close(); // close stream and send the message

       // wait maximum 15 seconds for response
       boolean ok = sc.receive(15000);

       if(ok) {  // response received
           if(sc.getStatusCode() == 200) {
              // handle 200 OK response
           } else {
              // handle possible error responses
           }
       }
       sc.close();
     } catch(Exception ex) {
          // handle Exceptions
     }
 }
 </pre>
 Following class shows the same example using callback listener interface:
 <p>
 <pre>
 public class SipClient implements SipClientConnectionListener {
    public void sendTextMessage(String msg) {
       SipClientConnection sc = null;
       try {
          sc = (SipClientConnection) Connector.open("sip:sippy.tester@host.com:5060");
          sc.setListener(this);
          sc.initRequest("MESSAGE", null);
          sc.setHeader("Subject", "testing...");
          sc.setHeader("Content-Type", "text/plain");
          sc.setHeader("Content-Length", Integer.toString(msg.length()));
          OutputStream os = sc.openContentOutputStream();
          os.write(msg.getBytes());
          os.close(); // close stream and send message
       } catch(Exception ex) {
         // handle Exceptions
       }
      return;
    }
 
    public void notifyResponse(SipClientConnection scn) {
       try {
          // retrieve the response received
          sc.receive(0); // does not block response is there
          if(sc.getStatusCode() == 200) {
             // handle 200 OK response
          } else {
             // handle possible error responses
          }
          sc.close();
       } catch(Exception ex) {
             // handle Exceptions
       }
    }
 } 
 </pre>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/sip/SipClientConnectionListener.html"><CODE>SipClientConnectionListener</CODE></A>, 
<A HREF="../../../javax/microedition/sip/SipConnectionNotifier.html"><CODE>SipConnectionNotifier</CODE></A>, 
<A HREF="../../../javax/microedition/sip/SipServerConnection.html"><CODE>SipServerConnection</CODE></A>, 
<A HREF="../../../javax/microedition/sip/SipDialog.html#getNewClientConnection(java.lang.String)"><CODE>SipDialog.getNewClientConnection(String)</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#enableRefresh(javax.microedition.sip.SipRefreshListener)">enableRefresh</A></B>(<A HREF="../../../javax/microedition/sip/SipRefreshListener.html">SipRefreshListener</A>&nbsp;srl)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enables the refresh on for the request to be sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#initAck()">initAck</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to initialize <tt>SipClientConnection</tt> 
 with SIP request method ACK.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/microedition/sip/SipClientConnection.html">SipClientConnection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#initCancel()">initCancel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to initialize <tt>SipClientConnection</tt> 
 with SIP request method CANCEL.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#initRequest(java.lang.String, javax.microedition.sip.SipConnectionNotifier)">initRequest</A></B>(java.lang.String&nbsp;method,
            <A HREF="../../../javax/microedition/sip/SipConnectionNotifier.html">SipConnectionNotifier</A>&nbsp;scn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes <tt>SipClientConnection</tt> to a specific SIP request 
 method (REGISTER, INVITE, MESSAGE, ...).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#receive(long)">receive</A></B>(long&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives SIP response message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#setCredentials(java.lang.String, java.lang.String, java.lang.String)">setCredentials</A></B>(java.lang.String&nbsp;username,
               java.lang.String&nbsp;password,
               java.lang.String&nbsp;realm)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets credentials for possible digest authentication.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#setListener(javax.microedition.sip.SipClientConnectionListener)">setListener</A></B>(<A HREF="../../../javax/microedition/sip/SipClientConnectionListener.html">SipClientConnectionListener</A>&nbsp;sccl)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the listener for incoming responses.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/sip/SipClientConnection.html#setRequestURI(java.lang.String)">setRequestURI</A></B>(java.lang.String&nbsp;URI)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets Request-URI explicitly.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.sip.SipConnection"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from interface javax.microedition.sip.<A HREF="../../../javax/microedition/sip/SipConnection.html">SipConnection</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/sip/SipConnection.html#addHeader(java.lang.String, java.lang.String)">addHeader</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getDialog()">getDialog</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getHeader(java.lang.String)">getHeader</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getHeaders(java.lang.String)">getHeaders</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getMethod()">getMethod</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getReasonPhrase()">getReasonPhrase</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getRequestURI()">getRequestURI</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#getStatusCode()">getStatusCode</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#openContentInputStream()">openContentInputStream</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#openContentOutputStream()">openContentOutputStream</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#removeHeader(java.lang.String)">removeHeader</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#send()">send</A>, <A HREF="../../../javax/microedition/sip/SipConnection.html#setHeader(java.lang.String, java.lang.String)">setHeader</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.io.Connection"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from interface javax.microedition.io.Connection</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>close</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="initRequest(java.lang.String, javax.microedition.sip.SipConnectionNotifier)"><!-- --></A><H3>
initRequest</H3>
<PRE>
public void <B>initRequest</B>(java.lang.String&nbsp;method,
                        <A HREF="../../../javax/microedition/sip/SipConnectionNotifier.html">SipConnectionNotifier</A>&nbsp;scn)
                 throws java.lang.IllegalArgumentException,
                        <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Initializes <tt>SipClientConnection</tt> to a specific SIP request 
 method (REGISTER, INVITE, MESSAGE, ...). The methods are defined in
 the RFC 3261 [1] and extensional specifications from SIP WG and 
 SIMPLE WG [2][3]. The default RequestURI and headers will be initialized 
 automatically. After this the 
 <tt>SipClientConnection</tt> is in <em>Initialized</em> state.
 <p>The headers <tt>From, Contact</tt> are set according to the properties
 of <tt>SipConnectionNotifier</tt> given as the second parameter. If 
 <tt>SipConnectionNotifier</tt> is <tt>null</tt> headers <tt>From, Contact</tt>
 are not set.
 <p>Headers that will be initialized are as follows:<br>
 <pre>
    To           // To address constructed from SIP URI given in Connector.open()
    From         // Set by the system. If SipConnectionNotifier is given and the 
                    SIP identity is shared the value will be set according the 
                    terminal SIP settings (see <A HREF="SipConnection.html#SIPID">SIP Identity</A> 
                    for more details). If the SipConnectionNotifier is not given 
                    (= null) and/or the SIP identity is not shared the From 
                    header must be set to a default value e.g. anonymous URI 
                    (see RFC 3261 [1], chapter 8.1.1.3 From).
    CSeq         // Set by the system
    Call-ID      // Set by the system
    Max-Forwards // Set by the system
    Via          // Set by the system
    Contact      // Set by the system (if SipConnectionNotifier is given) for 
                    REGISTER, INVITE and SUBSCRIBE. The value will be set 
                    according to the terminal IP settings and the 
                    SipConnectionNotifier properties. So the new request
                    is associated with the SipConnectionNotifier. The
                    other end can use the contact for subsequent requests.
 </pre>
 Reference RFC 3261 [1] p.35 (8.1.1 Generating the Request) and p.159 (20 Header Fields)
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>method</CODE> - Name of the method<DD><CODE>scn</CODE> - <tt>SipConnectionNotifier</tt> to which the request will be associated. If <tt>SipConnectionNotifier</tt> is <tt>null</tt> the request will not be associated to a user defined listening point.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the method is invalid
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the request can not be set, because of wrong state in <tt>SipClientConnection</tt>. Furthermore, ACK and CANCEL methods can not be initialized in <em>Created</em> state.<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/sip/SipConnectionNotifier.html"><CODE>SipConnectionNotifier</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setRequestURI(java.lang.String)"><!-- --></A><H3>
setRequestURI</H3>
<PRE>
public void <B>setRequestURI</B>(java.lang.String&nbsp;URI)
                   throws java.lang.IllegalArgumentException,
                          <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Sets Request-URI explicitly. Request-URI can be set only in <em>Initialized</em> 
 state.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>URI</CODE> - Request-URI
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - MAY be thrown if the URI is invalid
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the Request-URI can not be set, because of wrong state, INVALID_OPERATION if the Request-URI is not allowed to be set.</DL>
</DD>
</DL>
<HR>

<A NAME="initAck()"><!-- --></A><H3>
initAck</H3>
<PRE>
public void <B>initAck</B>()
             throws <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Convenience method to initialize <tt>SipClientConnection</tt> 
 with SIP request method ACK. ACK can be applied only to INVITE
 request. The method is available when final response (2xx) has been received.
 The header fields of the ACK are constructed in the same way as for any request sent 
 within a dialog with the exception of the CSeq and the header fields related to authentication
 (RFC 3261 [1], p.82).
 The Request-URI and headers will be initialized automatically.
 After this the <tt>SipClientConnection</tt> is in <em>Initialized</em> state.
 <p>At least Request-URI and following headers will be set by the method (RFC 3261 [1] 12.2.1.1 Generating the Request p.73 and 8.1.1 Generating the Request p.35).<br>
 See also RFC 3261 [1] 13.2.2.4 2xx Responses (p.82)<br>
 <pre>
    Request-URI  // system uses the remote target and route set to build the Request-URI
    To           // remote URI from the dialog state + remote tag of the dialog ID
    From         // local URI from the dialog state + local tag of the dialog ID
    CSeq         // the sequence number of the CSeq header field MUST be the same as 
                    the INVITE being acknowledged, but the CSeq method MUST be ACK.
    Call-ID      // Call-ID of the dialog
    Via          // Via header field indicates the transport used for the transaction 
                    and identifies the location where the response is to be sent
    Route        // system uses the remote target and route set (if present) 
                    to build the Route header
    Contact      // SHOULD include a Contact header field in any target refresh 
                    requests within a dialog, and unless there is a need to change 
                    it, the URI SHOULD be the same as used in previous requests within 
                    the dialog
    Max-Forwards // header field serves to limit the number of hops a request can 
                    transit on the way to its destination.
 </pre>
 <p>
 The following rules also apply:<br>
 <b>a)</b> For error responses (3xx-6xx) the ACK is sent automatically by the system in transaction level. If user
 initializes an ACK which has already been sent an Exception will be thrown.<br>
 <b>b)</b> Using <tt>initRequest("ACK", null)</tt> builds the request 
 from scratch and does not set the headers according to the current 
 SIP dialog.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the request can not be set, because of wrong state, INVALID_OPERATION if the ACK request can not be initialized for other reason (already sent or the original request is non-INVITE).</DL>
</DD>
</DL>
<HR>

<A NAME="initCancel()"><!-- --></A><H3>
initCancel</H3>
<PRE>
public <A HREF="../../../javax/microedition/sip/SipClientConnection.html">SipClientConnection</A> <B>initCancel</B>()
                               throws <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Convenience method to initialize <tt>SipClientConnection</tt> 
 with SIP request method CANCEL. The method is available when a provisional response has been received. The CANCEL request starts a new transaction,
 that is why the method returns a new <tt>SipClientConnection</tt>.
 The CANCEL request will be built according to the original INVITE request 
 within this connection. The RequestURI and headers will be initialized 
 automatically. After this the <tt>SipClientConnection</tt> is in 
 <em>Initialized</em> state. The message is ready to be sent.
 <p>The following information will be set by the method:<br>
 <pre>
    Request-URI  // copy from original request
    To           // copy from original request
    From         // copy from original request
    CSeq         // same value for the sequence number as was present in the original 
                    request, but the method parameter MUST be equal to "CANCEL"
    Call-ID      // copy from original request
    Via          // single value equal to the top Via header field of the request 
                    being cancelled
    Route        // If the request being cancelled contains a Route header field, the 
                    CANCEL request MUST include that Route header field's values
    Max-Forwards // header field serves to limit the number of hops a request can 
                    transit on the way to its destination. 
 </pre>
 Reference RFC 3261 [1] p.53-54
 <p>
 <b>Note:</b> using <tt>initRequest("CANCEL", null);</tt> builds the request 
 from scratch and does not set the headers according to the current SIP 
 dialog.<br><br>
 A CANCEL request SHOULD NOT be sent to cancel a request other than
   INVITE.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>A new <tt>SipClientConnection</tt> with preinitialized CANCEL request.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the request can not be set, because of wrong state (in <tt>SipClientConnection</tt>) or the system has already got the 200 OK response (even if not read with <tt>receive()</tt> method). INVALID_OPERATION if CANCEL method can not be applied to the current request method.</DL>
</DD>
</DL>
<HR>

<A NAME="receive(long)"><!-- --></A><H3>
receive</H3>
<PRE>
public boolean <B>receive</B>(long&nbsp;timeout)
                throws <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A>,
                       java.io.IOException</PRE>
<DL>
<DD>Receives SIP response message. The receive method will update the 
 <tt>SipClientConnection</tt> with the last new received response. 
 If no message is received the method will block until something 
 is received or specified amount of time has elapsed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>timeout</CODE> - the maximum time to wait in milliseconds. 0 = do not wait, just poll
<DT><B>Returns:</B><DD>Returns <tt>true</tt> if response was received. Returns <tt>false</tt> if the given timeout elapsed and no response was received.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if the message could not be received
          or because of network failure
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the receive can not 
 be called because of wrong state.<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/sip/SipConnection.html#send()"><CODE>SipConnection.send()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setListener(javax.microedition.sip.SipClientConnectionListener)"><!-- --></A><H3>
setListener</H3>
<PRE>
public void <B>setListener</B>(<A HREF="../../../javax/microedition/sip/SipClientConnectionListener.html">SipClientConnectionListener</A>&nbsp;sccl)
                 throws java.io.IOException</PRE>
<DL>
<DD>Sets the listener for incoming responses. If a listener is already set it will be overwritten. Setting listener to <tt>null</tt> will remove the current listener.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sccl</CODE> - reference to the listener object. Value <tt>null</tt> will remove the existing listener.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if the connection is closed</DL>
</DD>
</DL>
<HR>

<A NAME="enableRefresh(javax.microedition.sip.SipRefreshListener)"><!-- --></A><H3>
enableRefresh</H3>
<PRE>
public int <B>enableRefresh</B>(<A HREF="../../../javax/microedition/sip/SipRefreshListener.html">SipRefreshListener</A>&nbsp;srl)
                  throws <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Enables the refresh on for the request to be sent. The method
 return a refresh ID, which can be used to update or stop
 the refresh.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>srl</CODE> - callback interface for refresh events, if this is <tt>null</tt>
 the method returns 0 and refresh is not enabled.
<DT><B>Returns:</B><DD>refresh ID. If the request is not refreshable returns 0.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE> - INVALID_STATE if the 
 refresh can not be enabled in this state.<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/sip/SipRefreshHelper.html"><CODE>SipRefreshHelper</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setCredentials(java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
setCredentials</H3>
<PRE>
public void <B>setCredentials</B>(java.lang.String&nbsp;username,
                           java.lang.String&nbsp;password,
                           java.lang.String&nbsp;realm)
                    throws <A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></PRE>
<DL>
<DD>Sets credentials for possible digest authentication.
 The application can set multiple credential triplets
 (username, password, realm) for one <tt>SipClientConnection</tt>. 
 The username and password are specified for certain protection domain, 
 which is defined by the realm parameter.<br><br>
 The credentials can be set:
 <ul>
 <li>before sending the original request in <em>Initialized</em> state. The
 API implementation caches the credentials for later use.
 <li>when 401 (Unauthorized) or 407 (Proxy Authentication Required) response is received
 in the <em>Unauthorized</em> state. The API implementation uses the given credentials
 to re-originate the request with proper authorization header. After that the
 <tt>SipClientConnection</tt> will be in <em>Proceeding</em> state.
 </ul>
 See also <A HREF="#CLIENT_STATE_CHART"><tt>SipClientConnection</tt> state chart</A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>username</CODE> - username (for this protection domain)<DD><CODE>password</CODE> - user password (for this protection domain)<DD><CODE>realm</CODE> - defines the protection domain
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if the username, password or realm is null
<DD><CODE>java.lang.SipException</CODE> - INVALID_STATE if the credentials can not
 be set in this state.
<DD><CODE><A HREF="../../../javax/microedition/sip/SipException.html">SipException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../javax/microedition/sip/SipClientConnectionListener.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SipClientConnection.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<font size=-1>Copyright &copy; 2003 Nokia Corporation. All Rights Reserved.<br/>  Java is a trademark of Sun Microsystems, Inc.
</BODY>
</HTML>
