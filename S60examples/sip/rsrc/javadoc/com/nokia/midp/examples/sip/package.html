<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="package_files/filelist.xml">
<link rel=Edit-Time-Data href="package_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>SIP Example</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>xzhezha</o:Author>
  <o:LastAuthor>xzhezha</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1717</o:TotalTime>
  <o:Created>2006-04-24T15:59:00Z</o:Created>
  <o:LastSaved>2006-04-25T20:36:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2092</o:Words>
  <o:Characters>11928</o:Characters>
  <o:Company>Nokia Oyj</o:Company>
  <o:Lines>99</o:Lines>
  <o:Paragraphs>27</o:Paragraphs>
  <o:CharactersWithSpaces>13993</o:CharactersWithSpaces>
  <o:Version>11.6408</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>119</w:Zoom>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:\5B8B\4F53;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:SimSun;}
h3
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p
	{font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:SimSun;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:351299718;
	mso-list-template-ids:840832754;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1
	{mso-list-id:381945395;
	mso-list-template-ids:1753787424;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l2
	{mso-list-id:706101162;
	mso-list-template-ids:868645268;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l3
	{mso-list-id:852841469;
	mso-list-template-ids:-1214333836;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l4
	{mso-list-id:865631058;
	mso-list-template-ids:2024823652;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l5
	{mso-list-id:869026619;
	mso-list-template-ids:-1395488712;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l5:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l6
	{mso-list-id:885530698;
	mso-list-template-ids:-476813812;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l7
	{mso-list-id:911159982;
	mso-list-template-ids:42267878;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l8
	{mso-list-id:1104573526;
	mso-list-template-ids:-1566780138;}
@list l8:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l9
	{mso-list-id:1187794108;
	mso-list-template-ids:844287280;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l10
	{mso-list-id:1490289046;
	mso-list-template-ids:-376912556;}
@list l10:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l11
	{mso-list-id:1714308309;
	mso-list-template-ids:-1495921834;}
@list l11:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l12
	{mso-list-id:1922569191;
	mso-list-template-ids:1703203526;}
@list l12:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l13
	{mso-list-id:2012684308;
	mso-list-template-ids:-1565240940;}
@list l13:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l14
	{mso-list-id:2127846785;
	mso-list-template-ids:-840001004;}
@list l14:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=EN-US link=blue vlink=blue style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal>This example contains two pairs of midlets and two
individual midlets that illustrate the use of the Session Initiation
Protocol(SIP).<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]></p>

<!--section contents-->

<h3>Section Contents</h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><a href="#1">1. About this example</a> </p>

<p><a href="#2">2. Pre-requisites</a> </p>

<p><a href="#3">3. Building and running</a> </p>

<p><a href="#4">4. Design and implementation</a> </p>

<p><a href="#5">5. Summary</a> <o:p></o:p></p>

</blockquote>

<div class=MsoNormal align=center style='text-align:center'>

<hr<!--(HR)============================================================-->
size=3 width="100%" align=center>

</div>

<h3><a name=1>1. About this example</a> </h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p>This example contains six MIDlets that illustrate aspects of the Session
Initiation Protocol(SIP).&nbsp; Some of the MIDlets operate in pairs. The six MIDlets
are the OriginatingInvite, TerminatingInvite, SendMessage,
&nbsp;ReceiveMessage, RegisterTest, and the Subscribe MIDlets. &nbsp;&nbsp;</p>

</blockquote>

<h3><a name=2>2. Pre-requisites</a> </h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p>The example MIDlets make use of the standard MIDP application framework and
LCDUI API. The reader should be familiar with these areas before attempting to
understand this example.</p>

<p>This example uses MIDP 2.0.</p>

</blockquote>

<h3><a name=3>3. Building and running</a> </h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p>The example is built using the standard method for building and running as
described in <a href="../../../../../../../../doc-files/building.html">Building
and running the examples</a>.</p>

<p>The following classes should be included in the jar:</p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p class=MsoNormal>com.nokia.midp.examples.sip.*</p>

</blockquote>

<p class=MsoNormal>OriginatingInvite, TerminatingInvite, SendMessage,
&nbsp;ReceiveMessage example MIDlets operate in a peer-to-peer manner (through
IP network) and they don&#8217;t require any other SIP network elements. The
RegisterTest and Subscribe MIDlets use SIP registrar and presence server
respectively.</p>

<p class=MsoNormal>Each MIDlet must register with SIP server first in order to
be visible to the SIP server before sending other requests. <span
style='mso-spacerun:yes'>&nbsp;</span>There are two ways to register with sip
server.&nbsp; One way is to configure the SDK or device's SIP setting, and
create the default SIP profile, if the SIP profile is registered successful, the
MIDlet running on this SDK or device will be registered by using this default
profile automatically. when without sending registrar request again.&nbsp; The
other way to register with SIP server is to send register request to the SIP
server specifically in the MIDlet before sending other requests. RegisterTest
MIDlet example shows how to register this way.<span
style='mso-spacerun:yes'>&nbsp; </span>It will overwrite the profile if there
is a profile registered already on the SDK it is running.<span
style='mso-spacerun:yes'>&nbsp; </span></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>&nbsp;</span>(Reference
to&nbsp;&quot;SIP API for Java 2 Micro Edition (JSR 180):Implementation
Notes&quot; in s60_3rd_MIDP_SDK\doc directory).&nbsp; <br>
Other than RegisterTest MIDlet, all other examples provided require the user to
create a default profile on the SDK.<span style='mso-spacerun:yes'>&nbsp;
</span>The public user name for the SDK running Subscribe, SendMessage and
OriginatingInvite MIDlets is: &quot;sip:sip1@sipServer&quot;.<span
style='mso-spacerun:yes'>&nbsp; </span>The public user name for the SDK running
ReceiveMessage and TerminatingInvite MIDlets is ip:sip2@sipServer&quot;.&nbsp; </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>SIP header information in each MIDlet must be consistent
with the public user name defined in the profile. <span
style='mso-spacerun:yes'>&nbsp;</span>For example, the value of the contact
header in the OriginatingInvite MIDlet should be: &#8220;sip:sip1@localAdress:localport&#8221;.
&quot;From&quot;&quot;To&quot;&quot;Contact&quot; SIP header in the MIDlets
needs to be matched for the sip instant messaging and invite to work.&nbsp;
Modification to the source and sip profile needs to be done accordingly if not
using the default sip public user name provided here.&nbsp; <br>
<br>
Please note: That the MIDlets can not share the local listening port specified
in the internal.config without opening the SipConnectionNotifier in shared
mode. See SipConnection documentation for more information. <br>
<br>
The following is the menu screen to display all the midlets. <br>
<br>
<img border=0 width=182 height=212 id="_x0000_i1041" src="doc-files/menu.jpg"
title=""><br>
<br>
<b><span style='color:black'>Using SendMessage and ReceiveMessage MIDlets: </span></b><br>
1) Start SendMessage and ReceiveMessage in separate emulators. The emulators
can run in same or separate host. <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=187 height=217 id="_x0000_i1026"
    src="doc-files/sendMsgInit.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>SendMessage</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
 style='width:115.5pt;mso-cellspacing:0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center'><!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><img
    border=0 width=184 height=217 id="_x0000_i1027"
    src="doc-files/receiveMsgInit.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center'><span
    class=dkcaption1><i>ReceiveMessage</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal><o:p></o:p></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION -->2) Specify the port number (e.g. 5060) where to
listen for SIP requests in ReceiveMessage MIDlet. Then press
&#8216;Start&#8217;. Following screen appears. <br>
<br>
<img border=0 width=184 height=217 id="_x0000_i1028"
src="doc-files/receiveMsgListen.JPG" title=""><br>
3) Specify in the &#8216;Address&#8217;-field the target address + port number
(host where ReceiveMessage is running) in SendMessage MIDlet. <br>
<br>
<img border=0 width=187 height=217 id="_x0000_i1029"
src="doc-files/sendMsgInit.JPG" title=""><br>
4) Modify &#8216;Subject&#8217; and &#8216;Message text&#8217; if you like and
press &#8216;Send&#8217;. If successful following kind of screens should appear
in respective ends: <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=184 height=217 id="_x0000_i1030"
    src="doc-files/sendMsgRes.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>SendMessage</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
 style='width:115.5pt;mso-cellspacing:0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center'><!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><img
    border=0 width=184 height=217 id="_x0000_i1031"
    src="doc-files/receiveMsgGet.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center'><span
    class=dkcaption1><i>ReceiveMessage</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal><o:p></o:p></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION --><b><span style='color:black'>Using OriginatingINVITE
and TerminatingINVITE MIDlets: </span></b><br>
1) Start OriginatingINVITE and TerminatingINVITE in separate emulators. The
emulators can run in same or separate host. Specify the listening port in
TerminatingINVITE and press &#8216;Start&#8217; <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=184 height=217 id="_x0000_i1032"
    src="doc-files/inviteInit.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>OriginatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
 style='width:115.5pt;mso-cellspacing:0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center'><!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><img
    border=0 width=184 height=217 id="_x0000_i1033"
    src="doc-files/terminateListen.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center'><span
    class=dkcaption1><i>TerminatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal><o:p></o:p></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION -->2) In OriginatingINVITE MIDlet specify in the
&#8216;Address&#8217;-field the target address + port number (host where
TerminatingINVITE is running) and press &#8216;Start&#8217;. If the session
set-up is successful the following text logs should appear on screens. <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=184 height=217 id="_x0000_i1034"
    src="doc-files/inviteRes.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>OriginatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
 style='width:115.5pt;mso-cellspacing:0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center'><!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><img
    border=0 width=184 height=217 id="_x0000_i1035"
    src="doc-files/terminateRes.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center'><span
    class=dkcaption1><i>TerminatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal><o:p></o:p></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION --><br>
Notice! The SDP content delivered in the INVITE and 200 OK <br>
messages is not relevant for operation of this example application. <br>
It is just there as an example. <br>
<br>
3) Pressing &#8216;Bye&#8217; on either end ends the session. The request BYE
will be sent and the other end will respond with 200 OK. <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=184 height=217 id="_x0000_i1036"
    src="doc-files/inviteEnd.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>OriginatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
 style='width:115.5pt;mso-cellspacing:0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center'><!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><img
    border=0 width=184 height=217 id="_x0000_i1037"
    src="doc-files/terminateEnd.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center'><span
    class=dkcaption1><i>TerminatingINVITE</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal><o:p></o:p></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION --><b>Using RegisterTest MIDlet: </b><br>
1) Start the MIDlet RegisterTest. The MIDlet will open a SipConnectionNotifier
in an arbitrary port. The information of the opened SipConnectionNotifier is used
to build the Contact address, which is shown in the startup window. Specify the
SIP registrar in the first text box and the content of From and To headers in
the second box. <br>
<br>
<img border=0 width=184 height=217 id="_x0000_i1038"
src="doc-files/register.JPG" title=""><br>
2) Press &#8216;Register&#8217;. The REGISTER request will be send to the
server. The response code and (if successful) the registered Contact header
will be printed on the screen. <br>
<br>
<b>Using Subscribe MIDlet </b><br>
1) Start the MIDlet Subscribe. Specify in the startup screen the user address,
who&#8217;s presence will be subscribed (username@host domain). <br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></p>

<!-- BEGIN IMAGE WITH CAPTION -->

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left
 width=154 style='width:115.5pt;mso-cellspacing:0in;mso-table-lspace:2.25pt;
 mso-table-rspace:2.25pt;mso-table-anchor-vertical:paragraph;mso-table-anchor-horizontal:
 column;mso-table-left:left' nowrap="">
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <div align=center>
  <table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=154
   style='width:115.5pt;mso-cellspacing:0in;mso-padding-alt:0in 0in 0in 0in'>
   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
    <td style='background:white;padding:0in 0in 0in 0in'>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><img
    border=0 width=184 height=217 id="_x0000_i1039"
    src="doc-files/subscribeInit.JPG" title=""></p>
    </td>
   </tr>
   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes' nowrap="">
    <td style='padding:0in 0in 0in 0in'>
    <div>
    <p class=MsoNormal align=center style='text-align:center;mso-element:frame;
    mso-element-frame-hspace:2.25pt;mso-element-wrap:around;mso-element-anchor-vertical:
    paragraph;mso-element-anchor-horizontal:column;mso-height-rule:exactly'><span
    class=dkcaption1><i>Subscribe</i></span></p>
    </div>
    </td>
   </tr>
  </table>
  </div>
  <p class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:2.25pt;
  mso-element-wrap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:
  column;mso-height-rule:exactly'><o:p></o:p></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><br>
<!-- END IMAGE WITH CAPTION --><!-- BEGIN IMAGE WITH CAPTION --><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<!-- END IMAGE WITH CAPTION -->2) Press &#8216;Subscribe&#8217;. The SUBSCRIBE
request will be sent .<br>
<br>
3) The response code is printed on the screen. Furthermore, if the server sends
a NOTIFY request. That is also reported and the content XML document is printed
on the screen. </p>

</blockquote>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3><a name=4>4. Design and implementation</a> </h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p>The SIP API provides the methods used by the applications to implement SIP
User Agent (UA) functionality and User Agent Server (UAS) functionality as
described in JSR 180.</p>

<p>The following list and class diagram identify the classes used in this
example.</p>

<p>Application classes</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>OriginatingInvite -
     Establishes SIP session by sending INVITE - ACK. Stops session by sending
     BYE.</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>TerminatingInvite - Answer to
     SIP INVITE request by sending 180 Ringing and 200 OK. Stops<br>
     session by sending BYE.</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>SendMessage - Sends SIP
     MESSAGE request with text content to other end. </li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>ReceiveMessage - Implements
     simple message receiving&nbsp;</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>RegisterTest -&nbsp; Sends
     REGISTER and receives response from the SIP registrar.</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo1;tab-stops:list .5in'>Subscribe - Sends SUBSCRIBE
     and receives response and NOTIFY from the presence<br>
     server.&nbsp;</li>
</ul>

<p>System classes and interfaces</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l13 level1 lfo2;tab-stops:list .5in'>SipClientConnection -&nbsp;
     Represents a SIP client transaction</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l13 level1 lfo2;tab-stops:list .5in'>SipConnectionNotifier
     -&nbsp; Defines a SIP server connection notifier</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l13 level1 lfo2;tab-stops:list .5in'>SipDialog - Represents one
     SIP Dialog</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l13 level1 lfo2;tab-stops:list .5in'>SipServerConnection -
     Represents SIP server transaction</li>
</ul>

<p class=MsoNormal style='margin-bottom:12.0pt'><br>
<img border=0 width=876 height=552 id="_x0000_i1040"
src="doc-files/sipclassdiagram.jpg" title=""></p>

<h4>OriginatingInvite </h4>

</blockquote>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><br>
The OriginatingInvite midlet creates a form for printing progress information.
&nbsp;The form contains a field for the address and port for the host where the
TerminatingInvite midlet is running. &nbsp;</p>

<p>The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l8 level1 lfo3;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Call...</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l8 level1 lfo3;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Call...&quot;
the following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l6 level1 lfo4;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Start a
     listener for incoming requests</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l6 level1 lfo4;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Open SIP
     connection with remote user</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l6 level1 lfo4;tab-stops:list .5in'>&nbsp; &nbsp;
     &nbsp;Initialize and send an INVITE request&nbsp;&nbsp;</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

<p><b>TerminatingInvite</b></p>

</blockquote>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><br>
The TerminatingInvite midlet creates a form for printing progress information.
&nbsp;The form contains a field for the receiving port. &nbsp;</p>

<p>The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l14 level1 lfo5;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Online</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l14 level1 lfo5;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Online&quot;
the following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l7 level1 lfo6;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Start a
     listener for incoming requests&nbsp;</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l7 level1 lfo6;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Incoming
     requests are handled by the implemented <br>
     &nbsp; &nbsp; &nbsp;SipServerConnectionListener interface (notifyRequest
     method)</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

<h4>SendMessage&nbsp; </h4>

<p>The SendMessage midlet creates a form for printing progress information.
&nbsp;The form contains a field for the address and port for the host where the
ReceiveMessage midlet is running. &nbsp;The form also contains fields for
&quot;subject&quot; and &quot;Message&quot;.<br>
<br>
The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l12 level1 lfo7;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Send</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l12 level1 lfo7;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Send&quot; the
following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo8;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Open a
     SipClientConnection</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo8;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Writes a
     message to the ooutput stream of the connection</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

<h4>ReceiveMessage&nbsp;</h4>

<p>The ReceiveMessage midlet creates a form for printing progress information.
&nbsp;The form contains a field for the receiving port. </p>

<p><br>
The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo9;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Start</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo9;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Start&quot;
the following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo10;tab-stops:list .5in'>&nbsp; &nbsp; &nbsp;Start a
     listener for incoming requests&nbsp;</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo10;tab-stops:list .5in'>&nbsp; &nbsp;
     &nbsp;Incoming requests are handled by the implemented
     SipServerConnectionListener interface (notifyRequest method)</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

<h4>RegisterTest </h4>

<p>The RegisterTest midlet creates a form for printing progress information.
&nbsp;The form contains the following fields: </p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo11;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp;
     &nbsp;&quot;Registrar address:&quot;</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo11;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp;
     &nbsp;&quot;From-To:&quot; </li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo11;tab-stops:list .5in'>&nbsp; &nbsp;
     &nbsp;&quot;Contact:&quot;</li>
</ul>

<p>The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo12;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Register</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo12;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Register&quot;
the following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo13;tab-stops:list .5in'>&nbsp; &nbsp; Open a
     SipClientConnection for REGISTER targeting the registrar address</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo13;tab-stops:list .5in'>&nbsp; &nbsp; Send the
     request</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo13;tab-stops:list .5in'>&nbsp; &nbsp; Wait for the
     response&nbsp;</li>
</ul>

<ul type=disc>
 <ul type=circle>
  <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
      auto;mso-list:l5 level2 lfo13;tab-stops:list 1.0in'>process if received
      or...</li>
  <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
      auto;mso-list:l5 level2 lfo13;tab-stops:list 1.0in'>timeout if not received
      </li>
 </ul>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

<h4>Subscribe </h4>

<p>The Subscribe midlet creates a form for printing progress information.
&nbsp;The form contains the &quot;Subscribe To&quot; field that contains the
user address, who's presence is being subscribed.<br>
<br>
The midlet also sets up the following commands:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l3 level1 lfo14;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp;&nbsp;Subscribe</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l3 level1 lfo14;tab-stops:list .5in'>&nbsp;&nbsp;&nbsp; Exit</li>
</ul>

<p>In the command handler for the midlet if the command is
&quot;Subscribe&quot; the following occurs:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo15;tab-stops:list .5in'>&nbsp; &nbsp; Open a
     SipClientConnection</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo15;tab-stops:list .5in'>&nbsp; &nbsp; Create and
     send a SUBSCRIBE message</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo15;tab-stops:list .5in'>&nbsp; &nbsp; Wait for the
     response</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo15;tab-stops:list .5in'>&nbsp; &nbsp; Wait a period
     of time</li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo15;tab-stops:list .5in'>&nbsp; &nbsp; Create and
     send an UNSUBSCRIBE message</li>
</ul>

<p>In the command handler for the midlet if the command is &quot;Exit&quot; the
midlet exits.</p>

</blockquote>

<h3><a name=5>5. Summary</a> </h3>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p style='margin-bottom:12.0pt'>This example contains six midlets that
illustrate aspects of the Session Initiation Protocol(SIP).&nbsp;</p>

</blockquote>

</div>

</body>

</html>
