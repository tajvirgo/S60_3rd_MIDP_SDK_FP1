<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title></title>
</head>
<body>
This example displays the list of media formats that a device supports,
and the download protocols supported for each one. <br>
<!--section contents-->
<h3>Section Contents</h3>
<blockquote>
  <p> <a href="#1">1. About this example</a> </p>
  <p> <a href="#2">2. Pre-requisites</a> </p>
  <p> <a href="#3">3. Building and running</a> </p>
  <p> <a href="#4">4. Design and implementation</a> </p>
  <p> <a href="#5">5. Summary</a> </p>
</blockquote>
<hr align="center" width="100%" size="2">
<h3> <a name="1">1. About this example</a> </h3>
<blockquote>
  <p>This example displays the list of media formats that a device
supports, and the download protocols supported for each one. It also
provides
information about support for capturing and recording media, and
playback
of polyphonic sound.</p>
</blockquote>
<h3> <a name="2">2. Pre-requisites</a> </h3>
<blockquote>
  <p>The example makes use of the standard MIDP application framework
and LCDUI API. The reader should be familiar with these areas before
attempting to understand this example.</p>
  <p> </p>
  <p>This example uses MIDP 1.0, which includes a limited subset of the
JSR-135 (Mobile Media) functionality.</p>
</blockquote>
<h3> <a name="3">3. Building and running</a> </h3>
<blockquote>
  <p>The example is built using the standard method for building and
running as described in <a
 href="../../../../../../../../../doc-files/building.html">Building
and
running the examples</a>.</p>
  <p>The following classes should be included in the jar:</p>
  <blockquote>com.nokia.midp.examples.mm.devicecap.*<br>
  </blockquote>
  <p>No resource files are used.</p>
  <h3> <a name="3.1">3.1 Playback capabilities</a> </h3>
  <p>When launched, the application displays a list of supported media
formats. Selecting a media format displays a dialog listing the
supported
protocols for that media format. The screen shots below show (on
various emulators) the list of media types on the left, with their
supported
protocols on the right.</p>
  <ul>
    <li>Press [center of rocker switch] to see the supported protocols
for the selected format.</li>
  </ul>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <td width="50%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/ListConcept.png"
 src="doc-files/ListConcept.png"> </div>
        </td>
        <td width="50%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/AlertConcept.png"
 src="doc-files/AlertConcept.png"> </div>
        </td>
      </tr>
    </tbody>
  </table>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <td width="50%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/List20.png"
 src="doc-files/List20.png"> </div>
        </td>
        <td width="50%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/Alert20.png"
 src="doc-files/Alert20.png"> </div>
        </td>
      </tr>
    </tbody>
  </table>
  <p>To make reading the list of supported protocols easier when
running
an emulator, the list is also sent to System.out.</p>
  <p>The media formats beginning "audio/" or "video/" use a MIME-like
notation. In MIME, each registered format has a standard name formed by
the
type of media, a slash character, and then the format used to encode
it. The registered types are documented at <a
 href="http://www.iana.org/assignments/media-types/">
http://www.iana.org/assignments/media-types/</a>.</p>
  <p>The Mobile Media specification permits the list to be extended
with
formats that have not been officially registered. At the time of
writing,
"audio/3gpp" and "video/3gpp" have been submitted to IANA for approval,
but are currently not officially registered MIME types.</p>
  <p>The MIME process also allows unregistered types, denoted by an
"x-"
after the slash. Some of these, for instance "audio/x-wav", have become
de facto standards.</p>
  <p>The following screenshot and list explain the functionality of the
menu items.</p>
  <div align="center"> <img alt="doc-files/Menu20.png"
 src="doc-files/Menu20.png"> </div>
  <ul>
    <li>"Details" also shows the supported protocols for the selected
format.</li>
    <li>"Audio capture" shows the audio capture support (see section
3.2).</li>
    <li>"Video capture" shows the image capture support (see section
3.2).</li>
    <li>"Polyphonic sound" is described immediately below.</li>
  </ul>
  <p>You may wish to play two media clips at once, such as a video of a
person speaking, with an additional audio track of background music.
The menu option "Polyphonic sound" checks whether sound from two
sources can be mixed. The detailed definition of polyphony being
supported is documentation for JSR-135. From <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html"
 title="class or interface in javax.microedition.media"><code>Manager</code></a>'s
documentation, click on the Overview link, and look for system property
"supports.mixing".</p>
  <div align="center"> <img alt="doc-files/PolyphonyUnsupported.png"
 src="doc-files/PolyphonyUnsupported.png"> </div>
  <h3> <a name="3.2">3.2 Capture capabilities</a> </h3>
  <p>The device may allow accessing the microphone or an integrated
camera from Java™. This is referred to as "capturing" the media. If a
device can capture a type of media it may allow the media to be
recorded.</p>
  <p>The list of supported formats may include "audio" and
"video" with a protocol of "capture" to indicate that the microphone
or integrated camera may be accessed from Java.</p>
  <p>The device's capabilities may be checked from the menu.</p>
  <ul>
    <li>(Left picture) Capture is not supported for this format. No
further details are checked.</li>
    <li>(Middle picture) Capture is supported for this format.
Recording is not supported for any format.</li>
    <li>(Below next paragraph) Capture is supported for this format.
Recording is supported for another format, but not this one.</li>
    <li>(Right picture) Both capture and recording are supported. The
application displays the list of supported encodings for recording.</li>
  </ul>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <td width="33%" valign="bottom" align="center">
        <div align="center"> <img
 alt="doc-files/CaptureUnsupported.png"
 src="doc-files/CaptureUnsupported.png"> </div>
        </td>
        <td width="33%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/RecordUnsupported.png"
 src="doc-files/RecordUnsupported.png"> </div>
        </td>
        <td width="33%" valign="bottom" align="center">
        <div align="center"> <img alt="doc-files/RecordSupported.png"
 src="doc-files/RecordSupported.png"> </div>
        </td>
      </tr>
    </tbody>
  </table>
  <p>In respect to video, "record" refers to capturing a moving image,
and may not be supported. On a phone supporting Mobile Media, the
device must allow the capture of a "snapshot", or still image. Separate
lists of encodings are displayed, one for movies, and one for still
images. </p>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <td width="100%" valign="bottom" align="center">
        <div align="center"> <img
 alt="doc-files/SnapshotSideBySide.png"
 src="doc-files/SnapshotSideBySide.png"> </div>
        </td>
      </tr>
    </tbody>
  </table>
</blockquote>
<h3> <a name="4">4. Design and implementation</a> </h3>
<blockquote>
  <p>The Mobile Media Manager class provides static methods for
retrieving information about the supported content types and transfer
protocols. This example displays the information provided by this API.</p>
  <p>The following list identifies the non-LCDUI classes used in this
example.</p>
  <p>Application classes</p>
  <ul>
    <li><a href="../../mm/devicecap/DeviceCapMIDlet.html"
 title="class in com.nokia.midp.examples.mm.devicecap"><code>DeviceCapMIDlet</code></a>
Retrieves information about media formats and protocols, also provides
all GUI functionality for this example.</li>
    <li><a href="../../mm/devicecap/QueryProperty.html"
 title="class in com.nokia.midp.examples.mm.devicecap"><code>QueryProperty</code></a>
Retrieves information about media capture and polyphony.</li>
  </ul>
  <p>System classes</p>
  <ul>
    <li><a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html"
 title="class or interface in javax.microedition.media"><code>Manager</code></a>
Static information about supported media, and factory for media players.</li>
    <li><a
 href="../../../../../../../../../CLDC1.1_API/java/lang/System.html"
 title="class or interface in java.lang"><code>System</code></a> Static
information about implementation properties.</li>
  </ul>
  <p>The application is a wrapper for the two Manager functions <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedContentTypes%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedContentTypes(java.lang.String)</code></a>
and <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedProtocols%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedProtocols(java.lang.String)</code></a>,
and the System function <a
 href="../../../../../../../../../CLDC1.1_API/java/lang/System.html#getProperty%28java.lang.String%29"
 title="class or interface in java.lang"><code>System.getProperty(String)</code></a>.
  </p>
  <h3> <a name="4.1">4.1 Supported media formats and protocols</a> </h3>
  <p>All the functionality discussed in this section of the
documentation is implemented in the DeviceCapMIDlet class.</p>
  <p>All information about supported formats and protocols is available
from the Manager class.</p>
  <p>Calling <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedContentTypes%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedContentTypes(java.lang.String)</code></a>
with argument null returns all supported types. The GUI uses the List
class to display the array returned by this call. </p>
  <p>When a media format is selected in the List, the application calls
  <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedProtocols%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedProtocols(java.lang.String)</code></a>
with the name of content type. This call returns the supported
protocols for that type, and the application displays this information
in a dialog.</p>
  <p>When the application is launched, it displays a list of supported
media formats. The following sequence diagram shows how this list is
retrieved.</p>
  <div align="center"> <img alt="doc-files/uml_types.jpg"
 src="doc-files/uml_types.jpg"> </div>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <th align="center" width="10%">Message</th>
        <th align="left" width="80%">Description</th>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">1</td>
        <td width="80%">The framework calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html"><code>DeviceCapMIDlet.startApp()</code></a>.
        </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">2</td>
        <td width="80%"> startApp creates a <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/lcdui/List.html"
 title="class or interface in javax.microedition.lcdui"><code>List</code></a>
to display the information. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">3 - 4</td>
        <td width="80%"> startApp calls <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedContentTypes%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedContentTypes(java.lang.String)</code></a>
with argument null to return an array of Strings naming the supported
media formats. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">5 - 6</td>
        <td width="80%"> startApp adds each MIME type to the List. </td>
      </tr>
    </tbody>
  </table>
  <p>When the user selects a media type in the list, the application
displays the list of protocols that may be used to download this type
of content. The following diagram shows how the list of supported
protocols for a media format is discovered.</p>
  <div align="center"> <img alt="doc-files/uml_protocols.jpg"
 src="doc-files/uml_protocols.jpg"> </div>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <th align="center" width="10%">Message</th>
        <th align="left" width="80%">Description</th>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">1 - 2</td>
        <td width="80%">The framework calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#commandAction%28javax.microedition.lcdui.Command,%20javax.microedition.lcdui.Displayable%29"><code>DeviceCapMIDlet.commandAction(Command,
Displayable)</code></a>. commandAction calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#showDetails%28%29"><code>DeviceCapMIDlet.showDetails()</code></a>.
        </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">3 - 6</td>
        <td width="80%"> showDetails retrieves the selected string
describing the media type from the GUI <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/lcdui/List.html"
 title="class or interface in javax.microedition.lcdui"><code>List</code></a>.
        </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">7 - 8</td>
        <td width="80%"> showDetails calls <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedProtocols%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedProtocols(java.lang.String)</code></a>
to return an array of supported protocols for the named media format. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">9</td>
        <td width="80%"> showDetails calls the convenience function <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#arrayToString%28java.lang.String%5B%5D%29"><code>DeviceCapMIDlet.arrayToString(String[])</code></a>
which converts the string array to a comma-separated list. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">10 - 11</td>
        <td width="80%"> showDetails creates and displays an Alert
dialog containing the comma-separated list. </td>
      </tr>
    </tbody>
  </table>
  <p>If there is no content type selected in the List, <a
 href="../../mm/devicecap/package-summary.html"><code>com.nokia.midp.examples.mm.devicecap</code></a>
returns after step 4.</p>
  <p>The following diagram shows the sequence of actions to retrieve
the
list of media formats together with the supported transport protocols
for each format. This is used by the function <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#listCapabilities%28%29"><code>DeviceCapMIDlet.listCapabilities()</code></a>
to provide a complete list to System.out.</p>
  <div align="center"> <img alt="doc-files/uml_listCapabilities.jpg"
 src="doc-files/uml_listCapabilities.jpg"> </div>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <th align="center" width="10%">Message</th>
        <th align="left" width="80%">Description</th>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">1</td>
        <td width="80%">startApp calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#listCapabilities%28%29"><code>DeviceCapMIDlet.listCapabilities()</code></a>.
        </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">2 - 3</td>
        <td width="80%"> listCapabilities calls <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedContentTypes%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedContentTypes(java.lang.String)</code></a>
with argument null to return an array of Strings naming supported
media format. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">4 - 9</td>
        <td width="80%"> listCapabilities iterates over the list of
media formats. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">5</td>
        <td width="80%"> listCapabilities prints the name of the media
format to <a
 href="../../../../../../../../../CLDC1.1_API/java/lang/System.html#out"
 title="class or interface in java.lang"><code>System.out</code></a>. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">6</td>
        <td width="80%"> listCapabilities calls <a
 href="../../../../../../../../../MIDP2.0_API/javadoc/javax/microedition/media/Manager.html#getSupportedProtocols%28java.lang.String%29"
 title="class or interface in javax.microedition.media"><code>Manager.getSupportedProtocols(java.lang.String)</code></a>
to return an array of supported protocols for the media format. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">8 - 9</td>
        <td width="80%"> listCapabilities iterates over the list of
protocols, printing them to <a
 href="../../../../../../../../../CLDC1.1_API/java/lang/System.html#out"
 title="class or interface in java.lang"><code>System.out</code></a>. </td>
      </tr>
    </tbody>
  </table>
  <h3> <a name="4.2">4.2 Polyphonic sound and media capture</a> </h3>
  <p>All the non-GUI functionality discussed in this section of the
documentation is implemented in the QueryProperty class. The methods of
QueryProperty return a String which DeviceCap shows in a dialog box.</p>
  <p>Information about polyphony and capture support is available from
the System.getProperty() function. For most of the information, it
indicates that a feature is supported by returning the String "true",
and that it is not supported by returning "false" or null. The utility
function <a
 href="../../mm/devicecap/QueryProperty.html#isTrue%28java.lang.String%29"><code>QueryProperty.isTrue(String)</code></a>
wraps System.getProperty(), and returns a boolean.</p>
  <p>The relevant system properties are defined in the overview of
JSR-135.</p>
  <p>The following diagram shows the sequence of actions to test
whether
polyphonic sound is supported.</p>
  <div align="center"> <img
 alt="doc-files/uml_showPolyphonySupport.jpg"
 src="doc-files/uml_showPolyphonySupport.jpg"> </div>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <th align="center" width="10%">Message</th>
        <th align="left" width="80%">Description</th>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">1 - 2</td>
        <td width="80%">The framework calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#commandAction%28javax.microedition.lcdui.Command,%20javax.microedition.lcdui.Displayable%29"><code>DeviceCapMIDlet.commandAction(Command,
Displayable)</code></a>. commandAction calls <a
 href="../../mm/devicecap/QueryProperty.html#getPolyphonySupport%28%29"><code>QueryProperty.getPolyphonySupport()</code></a>.
        </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">3 - 4</td>
        <td width="80%"> getPolyphonySupport uses the utility function <a
 href="../../mm/devicecap/QueryProperty.html#isTrue%28java.lang.String%29"><code>QueryProperty.isTrue(String)</code></a>
to test the System property "supports.mixing". </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">5</td>
        <td width="80%"> getPolyphonySupport returns a String stating
whether audio mixing is supported. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">6 - 7</td>
        <td width="80%"> commandAction creates and displays an Alert
dialog containing the information in the returned by
getPolyphonySupport. </td>
      </tr>
    </tbody>
  </table>
  <p>The following diagram shows the sequence of actions to retrieve
the
device's capabilities for video capture.</p>
  <div align="center"> <img alt="doc-files/uml_showCaptureSupport.jpg"
 src="doc-files/uml_showCaptureSupport.jpg"> </div>
  <table width="90%" border="0">
    <tbody>
      <tr>
        <th align="center" width="10%">Message</th>
        <th align="left" width="80%">Description</th>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">1 - 2</td>
        <td width="80%">The framework calls <a
 href="../../mm/devicecap/DeviceCapMIDlet.html#commandAction%28javax.microedition.lcdui.Command,%20javax.microedition.lcdui.Displayable%29"><code>DeviceCapMIDlet.commandAction(Command,
Displayable)</code></a>. commandAction calls <a
 href="../../mm/devicecap/QueryProperty.html#getCaptureSupport%28java.lang.String%29"><code>QueryProperty.getCaptureSupport(String)</code></a>.
For the menu item "Video capture", it passes the argument "video". </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">3</td>
        <td width="80%"> getCaptureSupport creates a new StringBuffer
to hold the results of the query. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">4 - 14</td>
        <td width="80%"> getCaptureSupport uses the utility function <a
 href="../../mm/devicecap/QueryProperty.html#isTrue%28java.lang.String%29"><code>QueryProperty.isTrue(String)</code></a>
to test the System property "supports.video.capture". If this property
is not "true", the application appends "capture not supported" to the
StringBuffer (this action is not shown on the diagram),
and resumes at step 15. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">5</td>
        <td width="80%"> getCaptureSupport appends "capture supported"
to the StringBuffer. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">6 - 10</td>
        <td width="80%"> getCaptureSupport uses the utility function <a
 href="../../mm/devicecap/QueryProperty.html#isTrue%28java.lang.String%29"><code>QueryProperty.isTrue(String)</code></a>
to test the System property "supports.recording". If this property is
not "true", the application appends "recording not supported" to the
StringBuffer (this action is not shown on the diagram),
and resumes at step 11. Failure of this test implies that it does
not support recording for any media format. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">7 - 8</td>
        <td width="80%"> getCaptureSupport retrieves the system
property "video.encodings", and checks that it is not null, and not the
empty string. If this test fails, the application appends "recording
not supported for this media format" to the StringBuffer (this
action is not shown on the diagram), and resumes at step 11. This test
may be reached and fail in the situation where a device supports audio
recording, but not video recording; a device that supported neither
would fail at step 6. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">9 - 10</td>
        <td width="80%"> getCaptureSupport appends "recording supported
to" to the StringBuffer, followed by the retrieved list of encodings. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">11 - 12</td>
        <td width="80%"> getCaptureSupport retrieves the system
property "video.snapshot.encodings", and checks that it is not null. If
this property is null, the application does not change the
StringBuffer, and resumes at step 15. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">13 - 14</td>
        <td width="80%"> getCaptureSupport appends "snapshots supported
to" to the StringBuffer, followed by the retrieved list of encodings. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">15 - 16</td>
        <td width="80%"> getCaptureSupport converts the StringBuffer to
a String, and returns it. </td>
      </tr>
      <tr>
        <td valign="top" align="center" width="10%">17 - 18</td>
        <td width="80%"> commandAction creates and displays an Alert
dialog containing the information in the returned by getCaptureSupport.
        </td>
      </tr>
    </tbody>
  </table>
  <p>For audio, the sequence is the same, with "audio" replacing
"video"
at steps 2, 4, 7 and 11.</p>
</blockquote>
<h3> <a name="5">5. Summary</a> </h3>
<blockquote>
  <p>This example has demonstrated how to query a device to obtain its
supported media formats, download protocols and capture capabilities.</p>
</blockquote>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
